const sessions = database.sessions;
const socketSessions = new WeakMap();

replace these stupid two maps with 1 good one 

const session = {
    id: sessionId,
    socketRef: socket,
    authorized: false,
    username: null,
    lastJob: null,
    submissions: [],
    difficulty: 1,
    shares: 0,
    lastAdjust: Date.now()
};